<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSQuizStarter</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body>
    <div class="container">
        <!-- premier ecran -->
        <div class="screen active" id="startScreen">
            <h1>JSQuizStarter</h1>
            <div class="userName">
                <label for="">Entrez votre nom d'utilisateur</label>
                <input type="text" id="usernameInput">
                <p id="errorMsg" style="color: red; display:none;">Veuillez entrer votre nom d'utilisateur</p>
            </div>

            <div id="quizInstructions">
                <h2>Instructions du Quiz</h2>
                <ul>
                    <li>Cliquez sur <strong>Commencer le quiz</strong> pour acc√©der aux cat√©gories.</li>
                    <li>Choisissez une cat√©gorie (JavaScript, NodeJs‚Ä¶).</li>
                    <li>S√©lectionnez une ou plusieurs r√©ponses selon la question.</li>
                    <li>Vous ne pouvez pas revenir en arri√®re une fois la question pass√©e.</li>
                    <li>Si le temps imparti pour une question est √©coul√©, elle passera automatiquement √† la suivante.</li>
                    <li>Apr√®s avoir r√©pondu, cliquez sur <strong>Suivant</strong> pour continuer.</li>
                    <li>Toutes les informations sur le quiz seront affich√©es √† la fin.</li>
                </ul>

                <button id="startQuizBtn">Commencer le Quiz</button>
            </div>

        </div>
        <!-- 2eme √©cran -->
        <div class="screen" id="cardScreen">
            <h1>JSQuizStarter</h1>
            <div  id="cards">
                <div class="card cardReprendre" id="cardReprendre">
                    <h3>Reprendre</h3>
                    <p>Continuer l√† o√π vous vous √™tes arr√™t√©</p>
                </div>

                <div class="card cardRevision">
                    <h3>R√©vision</h3>
                    <p>Voir les questions et r√©ponses</p>
                </div>

                <div class="card carddashboard" id="cardDashboard">
                    <h3>Tableau de bord</h3>
                    <p>Consulter vos statistiques</p>
                </div>

                <div class="card cardNewQuiz" id="cardNewQuiz">
                    <h3>Nouvelle partie</h3>
                    <p>Recommencer un quiz depuis le d√©but</p>
                </div>
            </div>
        </div>
        <!-- 3eme √©cran -->
        <div class="screen" id="categorieScreen">
            <h1>JSQuizStarter</h1>
            <p>Vous etes pres pour tester votre connaissances ?</p>
            <p>Choisir une categorie pour commencer</p>
            <!-- <p>Temps de quiz: <span class="timeGlobale"></span></p> -->
            <div class="categories">
                <div class="cat" data-categorie="javaScript">JavaScript</div>
                <div class="cat" data-categorie="nodeJs">Node.js</div>
                <div class="cat" data-categorie="baseDeDonnee">Bases de donn√©es</div>
            </div>
        </div>
        <!-- 4eme √©cran -->
        <div class="screen" id="questionScreen">
            <div class="timeUsername">
                <p>Temps: <span id="time"></span></p>
                <p id="username"></p>
            </div>
            <div class="header">
                <h2 id="question">les questions</h2>
                <div class="testInfo">
                    <p>Question <span id="currentQuestion"></span> de <span id ="nbrQuestions"></span></p>
                </div>
            </div>
            <div class="reponses" id="reponses">
            </div>
            <div class="btns">
                <button id="nextBtn" disabled="disabled">Suivant</button>
                <button type="submit" id="submitBtn">Valider</button>
            </div>
        </div>
        <!-- 5eme √©cran -->
        <div class="screen " id="resultScreen" >
            <p id="quizTermine">quiz termin√©</p>
            <p id="tempsDequiz">Vous avez pass√© <span id="timeGlob"></span> dans tout le quiz</p>
            <p id="feedBack"></p>
            <p id="scoreResult">Votre score est : <span id="scoreFinale"></span> sur <span id ="totalQuestions"></span></p>
            <div id="finalResult">
            </div>
            <button id="displayDashboardBtn">Dashboard</button>
        </div>
         <!-- 6eme √©cran -->
        <div class="screen" id="dashboardScreen">
            <h1>Tableau de Bord</h1>
            
            <div id="emptyState" class="empty-state" style="display: none;">
                <h3>Aucune partie jou√©e</h3>
                <p>Commencez votre premier quiz pour voir vos statistiques ici !</p>
            </div>

            <div id="dashboardContent" >
                <!-- Statistiques globales -->
                <div class="dashboard-grid">
                    <div class="stats-card">
                        <div class="stat-number" id="totalGames">0</div>
                        <div class="stat-label">Parties jou√©es</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-number" id="bestScore">0%</div>
                        <div class="stat-label">Meilleur score</div>
                    </div>
                    <div class="stats-card">
                        <div class="stat-number" id="avgScore">0%</div>
                        <div class="stat-label">Score moyen</div>
                    </div>
                </div>

                <!-- Top 3 joueurs -->
                <h2>Top 3 Joueurs</h2>
                <div class="topPlayers" id="topPlayers">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>
                
                <!-- Graphiques -->
                <div class="chart-grid">
                    <div class="chart-container">
                        <h3>üìà R√©partition par Cat√©gorie</h3>
                        <canvas id="categorieChart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>üìä Progression des Scores</h3>
                        <canvas id="progressScoreChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Statistiques par categorie -->
                <h2>Statistiques Par cat√©gorie</h2>
                <div class="categorieStats" id="catStats">
                    <!-- G√©n√©r√© dynamiquement -->
                </div>

            </div>

            <div class="btns">
                <button id="statsTableBtn">Statistiques</button>
            </div>
        </div>
        <!-- 7eme ecran -->
        <div class="screen" id="statsTableScreen">
            <h2 id="dashboardTitle">Historique des parties</h2>
            <table id="historyTable" class="dashboard-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>cat√©gorie</th>
                        <th>Score</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div class="btns">
                <button id="recommancerBtn">Recommencer</button>
                <button id="exportCsvBtn">Export CSV</button>
                <button id="exportJsonBtn">Export JSON</button>
            </div>
        </div>
    </div>
    <script type="module" src="./modules/main.js"></script>
</body>
</html>